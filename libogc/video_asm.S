#include <asm.h>

	.globl __VIClearFramebuffer
	//r3 = dst, r4 = length(bytes),r5 = color
__VIClearFramebuffer:
	srwi.	r0,r4,8
	beq		2f
	mtctr	r0
	subi	r3,r3,4
1:	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)

	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	stwu	r5,4(r3)
	bdnz	1b
2:	blr
